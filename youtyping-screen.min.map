{"version":3,"file":"youtyping-screen.min.js","sources":["youtyping-screen.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","str","max","toString","length","Screen","element","settings","screen","this","FPS","items","width","height","hitPosition","speed","noteSize","lyricSize","rollYpos","longLineHeight","lineHeight","screenPadding","bufferTextPosition","currentLyricPosition","nextLyricPosition","kanaLyricPosition","judgeColors","perfect","great","good","bad","failed","neglect","cursorHideTime","youTypingSettings","videoId","dataFile","tableFile","initial","correction","controlledCorrection","offset","volume","playbackQuality","initialize","paper","setup","canvas","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","i","index","push","PointText","debugText","justification","bufferText","point","bottomRight","multiply","content","fontSize","currentLyric","nextLyric","kanaLyric","judgeEffects","Group","setInterval","youTyping","zeroCallFPS","onResourceReady","now","paddingRight","paddingLeft","roll","forEach","item","emergeTime","vanishTime","error","zeroTime","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","onGameReady","pressEnter","triggerStartScreen","event","type","key","remove","tool","onKeyDown","start","onMouseDown","onFrame","play","triggerHitNote","preventDefault","reset","player","getPlayerState","hit","hasOwnProperty","runTime","position","longLine","addChild","Line","from","to","smallLine","note","lyric","remainingText","fontFamily","orderStop","segments","lineBy","closed","x","state","noteState","CLEARED","visible","style","WAITING","HITTING","opacity","FAILED","estimatedZero","toFixed","project","activeLayer","children","inputBuffer","currentLyricIndex","nextLyricIndex","judgeEffect","controller","hideCursorId","onPlayerStateChange","data","YT","PlayerState","PLAYING","onMouseMove","DOM","css","cursor","clearTimeout","setTimeout","onJudgement","JudgeEffect","judgement","judgeColor","judge","add","combo","translate","onGameEnd","resultCover","showResult","screenSize","result","color","Color","brightness","saturation","scorebook","maxCombo","param","undefined","parseFloat","Boolean","wrap","margin","id","appendTo","display","z-index","data-paper-keepalive","top","left","YouTyping","window","performance","module"],"mappings":"CAEC,SAASA,GAqhBV,QAASC,GAASC,GACjB,GAAIC,GAAO,GAAIC,MACXC,EAAKC,EAAIH,EAAKI,WAAY,GAC1BC,EAAKF,EAAIH,EAAKM,aAAc,GAC5BC,EAAKJ,EAAIH,EAAKQ,aAAc,GAC5BC,EAAMN,EAAIH,EAAKU,kBAAmB,EACtCC,GAAE,UAAUC,OAAO,IAAMV,EAAK,IAAMG,EAAK,IAAME,EAAK,IAAME,EAAM,KAAOV,EAAO,MAC9Ec,QAAQC,IAAIf,GAYb,QAASI,GAAIY,EAAKC,GAEjB,MADAD,GAAMA,EAAIE,WACHF,EAAIG,OAASF,EAAMb,EAAI,IAAMY,EAAKC,GAAOD,EAziBjD,GAAII,GAAS,SAAUC,EAASC,GAC/B,GAAIC,GAASC,KAETC,EAAM,CAIVD,MAAKE,SAGLF,KAAKF,UACJK,MAAO,KACPC,OAAQ,IACRC,YAAa,GACbC,MAAO,GACPC,SAAU,GACVC,UAAW,GACXC,SAAU,GACVC,eAAgB,IAChBC,WAAY,IACZC,cAAe,GACfC,oBAAqB,GAAK,IAC1BC,sBAAuB,GAAK,KAC5BC,mBAAoB,GAAK,IACzBC,mBAAoB,GAAK,IACzBC,aACCC,QAAS,SACTC,MAAO,OACPC,KAAM,OACNC,IAAK,OACLC,OAAQ,OACRC,QAAS,QAEVC,eAAgB,IAIjB,IAAIC,IACHC,QAAS,cACTC,SAAU,WACVC,UAAW,qBACXC,SAAS,EACTC,WAAY,EACZC,qBAAsB,EACtBC,OAAQ,EACRC,OAAQ,IACRC,gBAAiB,UACjBnC,OAAQA,EAGTC,MAAKmC,WAAa,WACjBC,MAAMC,MAAMtC,EAAOuC,QAEnBvC,EAAOwC,MAAQ,GAAIH,OAAMI,KAAKC,UAAUL,MAAMM,KAAKC,QACnD5C,EAAOwC,MAAMK,UAAY,QACzB7C,EAAOwC,MAAMK,UAAUC,MAAQ,GAE/B9C,EAAO+C,aACP,KAAK,GAAIC,GAAI,EAAO,EAAJA,EAAOA,IAAK,CAC3B,GAAIC,GAAQjD,EAAO+C,WAAWG,KAAK,GAAIb,OAAMc,WAAW,GAAI,IAAMH,EAAI,KACtEhD,GAAOoD,UAAYpD,EAAO+C,WAAWE,EAAQ,GAC7CjD,EAAOoD,UAAUC,cAAgB,OACjCrD,EAAOoD,UAAUP,UAAY,QAG9B7C,EAAOsD,WAAa,GAAIjB,OAAMc,WAC7BI,MAAOlB,MAAMM,KAAKC,OAAOY,YAAYC,SAAS1D,EAASe,oBACvD4C,QAAS,GACTb,UAAW,QACXQ,cAAe,OACfM,SAAU,KAGX3D,EAAO4D,aAAe,GAAIvB,OAAMc,WAC/BI,MAAOlB,MAAMM,KAAKC,OAAOY,YAAYC,SAAS1D,EAASgB,sBACvD2C,QAAS,GACTb,UAAW,QACXQ,cAAe,SACfM,SAAU,KAGX3D,EAAO6D,UAAY,GAAIxB,OAAMc,WAC5BI,MAAOlB,MAAMM,KAAKC,OAAOY,YAAYC,SAAS1D,EAASiB,mBACvD0C,QAAS,GACTb,UAAW,QACXQ,cAAe,SACfM,SAAU,KAGX3D,EAAO8D,UAAY,GAAIzB,OAAMc,WAC5BI,MAAOlB,MAAMM,KAAKC,OAAOY,YAAYC,SAAS1D,EAASkB,mBACvDyC,QAAS,GACTb,UAAW,QACXQ,cAAe,SACfM,SAAU,KAGX3D,EAAO+D,aAAe,GAAI1B,OAAM2B,MAEhCC,YAAY,WACXjE,EAAO+C,WAAW,GAAGW,QAAU,QAAUxD,EACzCA,EAAM,EACNF,EAAO+C,WAAW,GAAGW,QAAU,iBAAmBQ,EAAUC,YAC5DD,EAAUC,YAAc,GACtB,KAEH3F,EAAS,wBAGVyB,KAAKmE,gBAAkB,WACtB,GAAIC,GAAMH,EAAUG,IAEhBC,EAAevE,EAASK,OAAS,EAAIL,EAASO,aAAeP,EAASS,SAAWT,EAASc,cAC1F0D,EAAcxE,EAASK,MAAQL,EAASO,YAAcP,EAASS,SAAWT,EAASc,aAEvF,KAGCqD,EAAUM,KAAKC,QAAQ,SAAUC,GAChCA,EAAKC,YAAc5E,EAASQ,MAAQmE,EAAKhG,KAAO4F,GAAgBvE,EAASQ,MACzEmE,EAAKE,YAAc7E,EAASQ,MAAQmE,EAAKhG,KAAO6F,GAAexE,EAASQ,QAGzE/B,EAAS,6BACR,MAAOqG,GAER,MADArG,GAAS,2CAA6CqG,GAC/C,GAGRX,EAAUY,SAAWT,EACrBrE,EAAO+E,SAEP/E,EAAOgF,UAAY,GAAI3C,OAAMI,KAAKwC,QACjCC,OAAQ7C,MAAMM,KAAKC,OAAOY,YAAYC,UAAU1D,EAASO,YAAaP,EAASW,WAC/EyE,OAAQpF,EAASS,SACjB4E,YAAa,EACbC,YAAa,WAIfpF,KAAKqF,YAAc,WAClBtF,EAAOuF,WAAa,GAAIlD,OAAMc,WAC7BI,MAAOlB,MAAMM,KAAKC,OAAOY,YAAYC,UAAU,GAAK,KACpDC,QAAS,6BACTL,cAAe,SACfM,SAAU,GACVd,UAAW,SAEZ,IAAI2C,GAAqB,SAAUC,IACd,YAAfA,EAAMC,MAAoC,UAAdD,EAAME,KAAmC,cAAfF,EAAMC,QAChE1F,EAAOuF,WAAWK,SAClBvD,MAAMwD,KAAKC,UAAY,KACvB9F,EAAO+F,SAGT1D,OAAMwD,KAAKC,UAAYN,EACvBxF,EAAOuF,WAAWS,YAAcR,EAEhChH,EAAS,mBAGVyB,KAAK8F,MAAQ,WACZvH,EAAS,kBAGT6D,MAAMM,KAAKsD,QAAUjG,EAAOiG,QAE5B/B,EAAUgC,OACV7D,MAAMwD,KAAKC,UAAYK,EAGxB,IAAIA,GAAiB,SAAUV,GACX,YAAfA,EAAMC,MAAoC,WAAdD,EAAME,MACrCF,EAAMW,iBACNpG,EAAOqG,SAEkC,IAAtCnC,EAAUoC,OAAOC,kBAAyC,YAAfd,EAAMC,OAEpDD,EAAMW,iBACNlC,EAAUsC,IAAIf,EAAME,MAItB1F,MAAKoG,MAAQ,WACZnC,EAAUmC,OAEV,KAAK,GAAI3B,KAAQ1E,GAAOG,MACnBH,EAAOG,MAAMsG,eAAe/B,IAC/B1E,EAAOG,MAAMuE,GAAMkB,QAGrB5F,GAAOG,SACPH,EAAOgF,UAAUY,SACjB5F,EAAOoE,kBAEPpE,EAAOsF,eAIRrF,KAAK8E,OAAS,WACb,GAAI5E,GAAQH,EAAOG,MAEfkE,EAAMH,EAAUG,IAChBqC,EAAUrC,EAAMH,EAAUY,QAE9BZ,GAAUM,KAAKC,QAAQ,SAAUC,EAAMzB,GAEtC,GAAI0D,IAAYjC,EAAKhG,KAAOgI,GAAW3G,EAASQ,MAAQR,EAASK,MAAQL,EAASO,WAGlF,IAAM2C,IAAS9C,IAuDd,GAAIuG,EAAUhC,EAAKC,YAAcD,EAAKE,WAAa8B,EAGlD,MAFAvG,GAAM8C,GAAO2C,oBACNzF,GAAM8C,OAzDQ,CACtB,KAAIyB,EAAKC,YAAc+B,GAAWA,GAAWhC,EAAKE,YAmDjD,MAjDAzE,GAAM8C,GAAS,GAAIZ,OAAM2B,MAGP,aAAdU,EAAKgB,OACRvF,EAAM8C,GAAO2D,SAAWzG,EAAM8C,GAAO4D,SAAS,GAAIxE,OAAMI,KAAKqE,MAC5DC,MAAOJ,EAAU5G,EAASW,SAAWX,EAASM,OAASN,EAASY,eAAiB,GACjFqG,IAAKL,EAAU5G,EAASW,SAAWX,EAASM,OAASN,EAASY,eAAiB,GAC/E0E,YAAa,QACbD,YAAa,MAIG,SAAdV,EAAKgB,OACRvF,EAAM8C,GAAOgE,UAAY9G,EAAM8C,GAAO4D,SAAS,GAAIxE,OAAMI,KAAKqE,MAC7DC,MAAOJ,EAAU5G,EAASW,SAAWX,EAASM,OAASN,EAASa,WAAa,GAC7EoG,IAAKL,EAAU5G,EAASW,SAAWX,EAASM,OAASN,EAASa,WAAa,GAC3EyE,YAAa,QACbD,YAAa,MAGG,SAAdV,EAAKgB,OAERvF,EAAM8C,GAAOiE,KAAO/G,EAAM8C,GAAO4D,SAAS,GAAIxE,OAAMI,KAAKwC,QACxDC,QAASyB,EAAU5G,EAASW,SAAWX,EAASM,QAChD8E,OAAQpF,EAASS,SACjB4E,YAAa,EACbC,YAAa,UAGdlF,EAAM8C,GAAOkE,MAAQhH,EAAM8C,GAAO4D,SAAS,GAAIxE,OAAMc,WACpDI,OAAQoD,EAAU5G,EAASW,SAAWX,EAASM,OAASN,EAASS,SAAW,IAC5EkD,QAASgB,EAAK0C,cACdvE,UAAW,QACXQ,cAAe,SACfM,SAAU5D,EAASU,UACnB4G,WAAY,iBAII,SAAd3C,EAAKgB,OACRvF,EAAM8C,GAAOqE,UAAYnH,EAAM8C,GAAO4D,SAAS,GAAIxE,OAAMI,MACxD8E,WAAYZ,EAAU5G,EAASW,SAAWX,EAASM,OAASN,EAASS,SAAW,KAChFqC,UAAW,WAEZ1C,EAAM8C,GAAOqE,UAAUE,QAAQ,GAAI,MACnCrH,EAAM8C,GAAOqE,UAAUE,QAAQ,IAAK,IACpCrH,EAAM8C,GAAOqE,UAAUG,QAAS,GAcjB,aAAd/C,EAAKgB,OACRvF,EAAM8C,GAAO0D,SAASe,EAAIf,GAET,SAAdjC,EAAKgB,OACRvF,EAAM8C,GAAO0D,SAASe,EAAIf,GAET,SAAdjC,EAAKgB,OACRvF,EAAM8C,GAAO0D,SAASe,EAAIf,GAET,SAAdjC,EAAKgB,OACRvF,EAAM8C,GAAO0D,SAASe,EAAIf,EACtBjC,EAAKiD,QAAUzD,EAAU0D,UAAUC,SACtC1H,EAAM8C,GAAOiE,KAAKY,SAAU,EAC5B3H,EAAM8C,GAAOkE,MAAMW,SAAU,IAG7B3H,EAAM8C,GAAOiE,KAAKa,OACjBlF,UACC6B,EAAKiD,QAAUzD,EAAU0D,UAAUI,SACnCtD,EAAKiD,QAAUzD,EAAU0D,UAAUK,QAChC,MAAQ,QAEb9H,EAAM8C,GAAOiE,KAAKgB,QACjBxD,EAAKiD,QAAUzD,EAAU0D,UAAUO,QACnCzD,EAAKiD,QAAUzD,EAAU0D,UAAUI,QAChC,EAAI,GAER7H,EAAM8C,GAAOkE,MAAMzD,QAAUgB,EAAK0C,mBAMtCnH,KAAKgG,QAAU,WAG4B,IAAtC/B,EAAUoC,OAAOC,kBACpBvG,EAAO+E,SAGR/E,EAAO+C,WAAW,GAAGW,QAAU,kBAAoBQ,EAAUkE,cAAcC,QAAQ,GACnFrI,EAAO+C,WAAW,GAAGW,QAAU,mBAAqBrB,MAAMiG,QAAQC,YAAYC,SAAS5I,OACvFI,EAAO+C,WAAW,GAAGW,QAAU,cAAgBQ,EAAUY,SAASuD,QAAQ,GAC1ErI,EAAO+C,WAAW,GAAGW,QAAU,SAAWQ,EAAUxF,KAAK2J,QAAQ,GACjErI,EAAOsD,WAAWI,QAAUQ,EAAUuE,YACtCzI,EAAO4D,aAAaF,QAAUQ,EAAUwE,kBAAoBxE,EAAUM,KAAKN,EAAUwE,mBAAmBjK,KAAO,GAC/GuB,EAAO6D,UAAUH,QAAUQ,EAAUyE,eAAiBzE,EAAUM,KAAKN,EAAUyE,gBAAgBlK,KAAO,GAGtGuB,EAAO+D,aAAayE,SAAS/D,QAAQ,SAAUmE,GAC9CA,EAAYC,WAAW5C,YAGxB/F,IAGD,IAAI4I,GAAe,IAGnB7I,MAAK8I,oBAAsB,SAAUtD,GAEhCA,EAAMuD,OAASC,GAAGC,YAAYC,QACjC9G,MAAMwD,KAAKuD,YAAc,WACxB/J,EAAEW,EAAOqJ,IAAIrJ,QAAQsJ,KACpBC,OAAQ,SAETC,aAAaV,GACbA,EAAeW,WAAW,WACzBpK,EAAEW,EAAOqJ,IAAIrJ,QAAQsJ,KACpBC,OAAQ,UAEPxJ,EAAS0B,kBAGbpC,EAAEW,EAAOqJ,IAAIrJ,QAAQsJ,KACpBC,OAAQ,SAETlH,MAAMwD,KAAKuD,YAAc,OAI3BnJ,KAAKyJ,YAAc,SAAUjE,GAC5B,GAAImD,GAAc,GAAIe,GAAYlE,EAAMmE,UACxChB,GAAYlE,KAAKmE,WAAaD,EAC9B5I,EAAO+D,aAAa8C,SAAS+B,EAAYlE,MAI1C,IAAIiF,GAAc,SAAUC,GAG3B3J,KAAKyE,KAAO,GAAIrC,OAAM2B,MAEtB/D,KAAK4J,WAAa9J,EAASmB,YAAY0I,EAAUE,OAEjD7J,KAAK6J,MAAQ7J,KAAKyE,KAAKmC,SAAS,GAAIxE,OAAMc,WACzCI,MAAOvD,EAAOgF,UAAU2B,SAASoD,KAAK,GAAIhK,EAASS,SAAW,KAC9DkD,QAASkG,EAAUE,MACnBjH,UAAW5C,KAAK4J,WAChBxG,cAAe,SACfM,SAAU,GACV0D,WAAY,gBAGbpH,KAAK+J,MAAQ/J,KAAKyE,KAAKmC,SAAS,GAAIxE,OAAMc,WACzCI,MAAOvD,EAAOgF,UAAU2B,SAASoD,KAAK,GAAIhK,EAASS,WACnDkD,QAASkG,EAAUI,MACnBnH,UAAW,QACXQ,cAAe,SACfM,SAAU,GACV0D,WAAY,gBAGbpH,KAAKgG,QAAU,WACdhG,KAAKyE,KAAKuF,WAAW,EAAG,KACxBhK,KAAKyE,KAAKwD,SAAW,IAEjBjI,KAAKyE,KAAKwD,QAAU,GACvBjI,KAAKyE,KAAKkB,UAKb3F,MAAKiK,UAAY,WAChB1L,EAAS,eAGT6D,MAAMwD,KAAKC,UAAY,KAEvB9F,EAAOmK,YAAc,GAAI9H,OAAMI,KAAKC,UAAUL,MAAMM,KAAKC,QACzD5C,EAAOmK,YAAYtH,UAAY,OAC/B7C,EAAOmK,YAAYtH,UAAUC,MAAQ,EAErC9C,EAAOmK,YAAYlE,QAAU,WAC5BhG,KAAK4C,UAAUC,OAAS,IACpB7C,KAAK4C,UAAUC,OAAS,IAC3B9C,EAAOmK,YAAYlE,QAAU,KAC7BmE,MAKH,IAAIA,GAAa,WAChB,GAAIC,GAAahI,MAAMM,KAAKC,OAAOY,WAEnCxD,GAAOsK,UAEPtK,EAAOsK,OAAOpH,KAAK,GAAIb,OAAMc,WAC5BI,MAAO8G,EAAW5G,UAAU,GAAK,IAAIsG,KAAK,EAAG,MAC7CrG,QAAS,UACTb,UAAW,QACXQ,cAAe,OACfM,SAAU,GACV0D,WAAY,iBAGZ,UAAW,QAAS,OAAQ,MAAO,SAAU,WAAW5C,QAAQ,SAAUmF,EAAW3G,GACrF,GAAIsH,GAAQ,GAAIlI,OAAMmI,MAAMzK,EAASmB,YAAY0I,GACjDW,GAAME,YAAc,GACpBF,EAAMG,YAAc,GACpB1K,EAAOsK,OAAOpH,KAAK,GAAIb,OAAMc,WAC5BI,MAAO8G,EAAW5G,UAAU,GAAK,IAAIsG,KAAK,EAAG,GAAK9G,EAAQ,MAC1DS,QAASkG,EAAY,KAAO1F,EAAUyG,UAAUf,GAChD/G,UAAW0H,EACXlH,cAAe,OACfM,SAAU,GACV0D,WAAY,kBAIdrH,EAAOsK,OAAOpH,KAAK,GAAIb,OAAMc,WAC5BI,MAAO8G,EAAW5G,UAAU,GAAK,IAAIsG,KAAK,EAAG,MAC7CrG,QAAS,cAAgBQ,EAAU0G,SACnC/H,UAAW,QACXQ,cAAe,OACfM,SAAU,GACV0D,WAAY,gBAOd,KAAK,GAAIwD,KAAS9K,GACbA,EAAS0G,eAAeoE,KACEC,SAAzB7K,KAAKF,SAAS8K,GACjB5K,KAAKF,SAAS8K,GAAS9K,EAAS8K,GACU,gBAAzB5K,MAAKF,SAAS8K,GAC/B5K,KAAKF,SAAS8K,GAASE,WAAWhL,EAAS8K,GAAQ,IACT,gBAAzB5K,MAAKF,SAAS8K,GAC/B5K,KAAKF,SAAS8K,GAAS9K,EAAS8K,GACU,iBAAzB5K,MAAKF,SAAS8K,KAC/B5K,KAAKF,SAAS8K,GAASG,QAAQjL,EAAS8K,KAM3C,KAAKA,IAASnJ,GACTA,EAAkB+E,eAAeoE,IACA,mBAAzB5K,MAAKF,SAAS8K,KACxBnJ,EAAkBmJ,GAAS5K,KAAKF,SAAS8K,GAM5C9K,GAAWE,KAAKF,SAQhBE,KAAKoJ,KACJ4B,KAAMnL,EAAQwJ,KACblJ,MAAOH,KAAKF,SAASK,MAAQ,KAC7BC,OAAQJ,KAAKF,SAASM,OAAS,KAC/B6K,OAAQ,SACRvE,SAAU,aACR,GAEHL,OAAQjH,EAAE,UACT8L,GAAI,qBACFC,SAAStL,GAASwJ,KACpBlJ,MAAOH,KAAKF,SAASK,MAAQ,KAC7BC,OAAQJ,KAAKF,SAASM,OAAS,KAC/BgL,QAAS,QACTC,UAAW,IACT,GAEHtL,OAAQX,EAAE,aACT8L,GAAI,mBACJI,uBAAwB,OACxBnL,MAAOH,KAAKF,SAASK,MAAMT,WAC3BU,OAAQJ,KAAKF,SAASM,OAAOV,aAC3ByL,SAAStL,GAASwJ,KACpBlJ,MAAOH,KAAKF,SAASK,MAAQ,KAC7BC,OAAQJ,KAAKF,SAASM,OAAS,KAC/BsG,SAAU,WACV6E,IAAK,EACLC,KAAM,EACNH,UAAW,MACT,IAGJrL,KAAKsC,OAAStC,KAAKoJ,IAAIrJ,OAEvB0B,EAAkBtB,MAAQH,KAAKF,SAASK,MACxCsB,EAAkBrB,OAASJ,KAAKF,SAASM,OAEzCJ,KAAKiE,UAAY,GAAIwH,WAAUzL,KAAKoJ,IAAI/C,OAAQ5E,EAChD,IAAIwC,GAAYjE,KAAKiE,SAErBjE,MAAKmC,aAgCN,IAHkC,mBAAvBuJ,QAAOC,cACjBD,OAAOC,iBAEHD,OAAOC,YAAYvH,IAAI,CAC3B,GAAIpC,GAAStD,KAAK0F,KAClBsH,QAAOC,YAAYvH,IAAM,WACxB,MAAO1F,MAAK0F,MAAQpC,GAsBtB1D,EAAQsB,OAASA,GACG,mBAAX8L,QAAyBE,OAAOtN,QAAUoN"}