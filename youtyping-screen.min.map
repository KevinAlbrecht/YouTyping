{"version":3,"file":"youtyping-screen.min.js","sources":["youtyping-screen.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","str","max","toString","length","Screen","element","settings","screen","this","FPS","items","width","height","hitPosition","speed","noteSize","lyricSize","rollYpos","longLineHeight","lineHeight","screenPadding","bufferTextPosition","currentLyricPosition","nextLyricPosition","kanaLyricPosition","judgeColors","perfect","great","good","bad","failed","neglect","cursorHideTime","youTypingSettings","videoId","videoStop","dataFile","tableFile","initial","correction","controlledCorrection","offset","volume","playbackQuality","initialize","paper","setup","canvas","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","i","index","push","PointText","debugText","justification","bufferText","point","bottomRight","multiply","content","fontSize","currentLyric","nextLyric","kanaLyric","judgeEffects","Group","setInterval","youTyping","zeroCallFPS","onResourceReady","now","paddingRight","paddingLeft","roll","forEach","item","emergeTime","vanishTime","error","zeroTime","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","onGameReady","pressEnter","triggerStartScreen","event","type","key","remove","tool","onKeyDown","start","onMouseDown","onFrame","play","triggerHitNote","preventDefault","reset","player","getPlayerState","hit","hasOwnProperty","runTime","position","longLine","addChild","Line","from","to","smallLine","note","lyric","remainingText","fontFamily","orderStop","segments","lineBy","closed","x","state","noteState","CLEARED","visible","style","WAITING","HITTING","opacity","FAILED","estimatedZero","toFixed","project","activeLayer","children","inputBuffer","currentLyricIndex","nextLyricIndex","judgeEffect","controller","hideCursorId","onPlayerStateChange","data","YT","PlayerState","PLAYING","onMouseMove","DOM","css","cursor","clearTimeout","setTimeout","onJudgement","JudgeEffect","judgement","judgeColor","judge","add","combo","translate","onGameEnd","resultCover","showResult","screenSize","result","color","Color","brightness","saturation","scorebook","maxCombo","param","undefined","parseFloat","Boolean","wrap","margin","id","appendTo","display","z-index","data-paper-keepalive","top","left","YouTyping","window","performance","module"],"mappings":"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"}