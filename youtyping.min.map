{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["YouTyping","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","element","settings","youTyping","this","noteState","WAITING","HITTING","CLEARED","FAILED","setupPlayerDeferred","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","player","setAttribute","YT","Player","height","width","videoId","playerVars","rel","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","resolve","event","data","PlayerState","ENDED","PLAYING","PAUSED","BUFFERING","CUED","reject","loadScoreXML","ajax","url","score","type","datatype","timeout","success","scoreXML","find","each","tempItem","parseFloat","attr","state","push","error","jqXHR","textStatus","errorThrown","startTime","now","zeroEstimateSamples","hitPosition","noteSize","speed","scoreYpos","longLineHeight","lineHeight","screenPadding","judges","perfect","from","to","great","good","zeroTime","zeroTimePad","currentTime","estimateSamples","estimatedZero","zeroCallFPS","Object","defineProperty","get","window","performance","play","playVideo","setInterval","gotCurrentTime","getCurrentTime","shift","estimatedSum","reduce","previous","current","hit","key","absoluteTime","nearestNote","nearestDistance","Infinity","forEach","item","Math","abs","distance","hitJudge","judgeName","hasOwnProperty","judge","param","undefined","parseInt","wrap","css","margin","position","id","appendTo","display","z-index","screen","data-paper-keepalive","top","left","Screen","getElementById","when","setup","done","load","ready","fail","canvas","FPS","items","deferred","paper","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","i","index","PointText","debugText","justification","content","paddingRight","paddingLeft","emergeTime","vanishTime","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","pressEnter","point","bottomRight","multiply","fontSize","triggerStartScreen","remove","tool","onKeyDown","start","onMouseDown","onFrame","getPlayerState","toFixed","project","activeLayer","children","triggerHitNote","createItem","setting","Group","addChild","Line","fontFamily","runTime","Xpos","x"],"mappings":"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"}