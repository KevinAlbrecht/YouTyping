{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["YouTyping","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","element","settings","youTyping","this","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","setupPlayerDeferred","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","window","onYouTubeIframeAPIReady","DOM","player","setAttribute","YT","Player","height","width","videoId","playerVars","rel","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","volume","resolve","event","data","PlayerState","ENDED","PLAYING","getCurrentTime","offset","seekTo","PAUSED","BUFFERING","CUED","reject","loadScoreXML","ajax","url","score","type","datatype","timeout","success","scoreXML","find","each","tempItem","parseFloat","attr","remainingText","state","push","nextLyricIndex","findNextLyric","error","jqXHR","textStatus","errorThrown","loadTable","tableFile","table","index","before","after","next","findNextNote","noteIndex","nextNote","i","item","itemIndex","nextLyric","gameLoop","gotCurrentTime","now","zeroTimePad","correction","zeroTime","currentTime","estimatedZero","estimateSamples","zeroEstimateSamples","shift","estimatedSum","reduce","previous","current","zeroCallFPS","previousLiveNote","previousLiveNoteIndex","forEach","note","failureSuspension","markFailed","currentNoteIndex","inputBuffer","currentLyricIndex","startTime","hitPosition","noteSize","speed","scoreYpos","longLineHeight","lineHeight","screenPadding","bufferTextPosition","currentLyricPosition","nextLyricPosition","judges","from","to","Infinity","controlledCorrection","Object","defineProperty","get","performance","play","playVideo","setInterval","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","rule","startsWith","nextNoteIndex","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","minimumRule","appliedRule","substr","hitNote","nearestNote","nearestNewNote","nearestDistance","Math","abs","distance","hitJudge","some","judge","previousNote","param","hasOwnProperty","undefined","wrap","css","margin","position","id","appendTo","display","z-index","screen","data-paper-keepalive","top","left","Screen","getElementById","when","setup","done","load","ready","fail","canvas","FPS","items","deferred","paper","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","PointText","debugText","justification","bufferText","point","bottomRight","multiply","content","fontSize","currentLyric","paddingRight","paddingLeft","emergeTime","vanishTime","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","pressEnter","triggerStartScreen","remove","tool","onKeyDown","start","onMouseDown","onFrame","getPlayerState","toFixed","project","activeLayer","children","triggerHitNote","preventDefault","setting","runTime","Group","longLine","addChild","Line","smallLine","lyric","fontFamily","orderStop","segments","lineBy","closed","x","visible","style","opacity","string","prefix","substring"],"mappings":"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"}