{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","assert","condition","message","Error","YouTyping","element","settings","youTyping","this","screen","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","itemType","LINE","LONGLINE","NOTE","LYRIC","STOP","zeroEstimateSamples","videoId","dataFile","tableFile","width","height","judges","from","to","weight","Infinity","breakCombo","failureSuspension","initial","correction","controlledCorrection","offset","videoStop","volume","playbackQuality","param","hasOwnProperty","undefined","parseFloat","Boolean","dataXML","roll","player","Object","defineProperty","get","window","performance","now","table","setupPlayerDeferred","gameEndFlag","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","setAttribute","YT","Player","playerVars","rel","start","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","setPlaybackQuality","playVideo","pauseVideo","resolve","event","dispatchEvent","data","PlayerState","ENDED","PLAYING","isPlayingGame","estimateSamples","PAUSED","BUFFERING","CUED","reject","loadDataXML","ajax","url","type","datatype","timeout","success","find","first","initializeRoll","error","jqXHR","textStatus","errorThrown","items","lastNote","virtualCombo","each","tempItem","attr","mapsTo","line","longline","note","lyric","stop","has","remainingText","children","state","judgement","totalCombo","push","nextLyricIndex","findNextLyric","loadTable","index","before","after","next","calculateWeight","sumOfWeight","forEach","item","romanized","romanizeString","romaji","totalWeight","string","minimumStrokePerCharacter","maximumCharacter","minimumRule","rule","strokePerCharacter","startsWith","remainingString","slice","remainingRomaji","findNextNote","noteIndex","nextNote","i","itemIndex","nextLyric","gameLoop","gotCurrentTime","getCurrentTime","gotPlayerState","getPlayerState","currentTime","estimatedZero","shift","estimatedSum","reduce","previous","current","zeroTimePad","stopVideo","zeroCallFPS","zeroTime","previousLiveNote","previousLiveNoteIndex","markFailed","currentNoteIndex","inputBuffer","currentLyricIndex","endGame","scorebook","neglect","failed","combo","getLastKeyHit","replay","updateScore","scoredWeight","judge","score","Math","floor","scoredCombo","play","seekTo","gameLoopId","setInterval","setTimeout","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","nextNoteIndex","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","appliedRule","substr","hitNote","cleared","lastKeyHit","worstJudge","nearestNote","nearestNewNote","nearestDistance","distance","abs","hitJudge","some","previousNote","maxCombo","reset","clearInterval","initialize","getKanaLyric","lyricIndex","kanaLyric","addEventListener","listener","removeEventListener","splice","properties","call","when","done","bind","fail","prefix","substring","String","prototype","valueOf","module"],"mappings":"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"}