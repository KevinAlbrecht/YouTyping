{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["YouTyping","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","element","settings","youTyping","this","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","setupPlayerDeferred","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","window","onYouTubeIframeAPIReady","DOM","player","setAttribute","YT","Player","height","width","videoId","playerVars","rel","start","offset","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","volume","setPlaybackQuality","playbackQuality","resolve","event","screen","call","data","PlayerState","ENDED","PLAYING","PAUSED","BUFFERING","CUED","reject","loadDataXML","ajax","url","dataFile","type","datatype","timeout","success","dataXML","find","first","items","roll","each","tempItem","parseFloat","attr","has","remainingText","children","state","push","nextLyricIndex","findNextLyric","error","jqXHR","textStatus","errorThrown","loadTable","tableFile","table","index","before","after","next","findNextNote","noteIndex","nextNote","i","item","itemIndex","nextLyric","gameLoop","gotCurrentTime","getCurrentTime","now","zeroTimePad","correction","zeroTime","currentTime","estimatedZero","estimateSamples","zeroEstimateSamples","shift","estimatedSum","reduce","previous","current","zeroCallFPS","previousLiveNote","previousLiveNoteIndex","forEach","note","failureSuspension","markFailed","currentNoteIndex","inputBuffer","currentLyricIndex","combo","startTime","hitPosition","noteSize","lyricSize","speed","rollYpos","longLineHeight","lineHeight","screenPadding","bufferTextPosition","currentLyricPosition","nextLyricPosition","kanaLyricPosition","judges","from","to","Infinity","breakCombo","initial","controlledCorrection","Object","defineProperty","get","performance","maxCombo","score","scorebook","play","playVideo","setInterval","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","rule","startsWith","nextNoteIndex","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","minimumRule","appliedRule","substr","hitNote","nearestNote","nearestNewNote","nearestDistance","Math","abs","distance","hitJudge","some","judge","previousNote","onJudgement","judgement","getKanaLyric","lyricIndex","kanaLyric","param","hasOwnProperty","undefined","Boolean","wrap","css","margin","position","id","appendTo","display","z-index","data-paper-keepalive","top","left","Screen","getElementById","callbacks","callback","when","setup","done","load","ready","fail","canvas","FPS","deferred","paper","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","PointText","debugText","justification","bufferText","point","bottomRight","multiply","content","fontSize","currentLyric","judgeEffects","Group","paddingRight","paddingLeft","emergeTime","vanishTime","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","pressEnter","triggerStartScreen","remove","tool","onKeyDown","onMouseDown","onFrame","triggerHitNote","getPlayerState","preventDefault","setting","runTime","longLine","addChild","Line","smallLine","lyric","fontFamily","orderStop","segments","lineBy","closed","x","visible","style","opacity","toFixed","project","activeLayer","judgeEffect","controller","cursor","JudgeEffect","judgeColor","add","translate","string","prefix","substring"],"mappings":"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"}