{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","assert","condition","message","Error","YouTyping","element","settings","youTyping","this","screen","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","zeroEstimateSamples","videoId","dataFile","tableFile","width","height","judges","from","to","weight","Infinity","breakCombo","failureSuspension","initial","correction","controlledCorrection","offset","videoStop","volume","playbackQuality","param","hasOwnProperty","undefined","parseFloat","Boolean","dataXML","roll","player","Object","defineProperty","get","window","performance","now","table","setupPlayerDeferred","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","setAttribute","YT","Player","playerVars","rel","start","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","setPlaybackQuality","playVideo","pauseVideo","resolve","event","call","data","PlayerState","ENDED","PLAYING","isPlayingGame","estimateSamples","PAUSED","BUFFERING","CUED","reject","loadDataXML","ajax","url","type","datatype","timeout","success","find","first","initializeRoll","error","jqXHR","textStatus","errorThrown","items","lastNote","virtualCombo","each","tempItem","attr","has","remainingText","children","state","judgement","totalCombo","push","nextLyricIndex","findNextLyric","loadTable","index","before","after","next","calculateWeight","sumOfWeight","forEach","item","romanized","romanizeString","romaji","totalWeight","string","minimumStrokePerCharacter","maximumCharacter","minimumRule","rule","strokePerCharacter","startsWith","remainingString","slice","remainingRomaji","findNextNote","noteIndex","nextNote","i","itemIndex","nextLyric","gameLoop","gotCurrentTime","getCurrentTime","gotPlayerState","getPlayerState","currentTime","estimatedZero","shift","estimatedSum","reduce","previous","current","zeroTimePad","stopVideo","zeroCallFPS","zeroTime","previousLiveNote","previousLiveNoteIndex","note","markFailed","currentNoteIndex","inputBuffer","currentLyricIndex","scorebook","neglect","failed","endGame","combo","onGameEnd","getLastKeyHit","replay","updateScore","scoredWeight","judge","score","Math","floor","scoredCombo","play","seekTo","gameLoopId","setInterval","setTimeout","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","nextNoteIndex","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","appliedRule","substr","hitNote","cleared","lastKeyHit","worstJudge","nearestNote","nearestNewNote","nearestDistance","distance","abs","hitJudge","some","previousNote","maxCombo","onJudgement","reset","clearInterval","initialize","getKanaLyric","lyricIndex","kanaLyric","callbacks","callback","when","done","onResourceReady","onGameReady","fail","prefix","substring","module"],"mappings":"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"}