{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["YouTyping","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","element","settings","setupPlayerDeferred","youTyping","this","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","player","setAttribute","YT","Player","height","width","videoId","playerVars","rel","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","resolve","event","data","PlayerState","ENDED","PLAYING","PAUSED","BUFFERING","CUED","reject","loadScoreXML","ajax","url","score","type","datatype","timeout","success","scoreXML","find","computeParameters","error","jqXHR","textStatus","errorThrown","paddingRight","hitPosition","noteSize","screenPadding","paddingLeft","each","tempItem","parseFloat","attr","push","forEach","item","emergeTime","speed","vanishTime","startTime","now","zeroEstimateSamples","scoreYpos","longLineHeight","lineHeight","zeroTime","zeroTimePad","currentTime","estimateSamples","estimatedZero","zeroCallFPS","Object","defineProperty","get","window","performance","play","playVideo","setInterval","gotCurrentTime","getCurrentTime","shift","estimatedSum","reduce","previous","current","param","undefined","parseInt","wrap","css","margin","position","id","appendTo","display","z-index","screen","data-paper-keepalive","top","left","Screen","getElementById","when","setup","done","load","ready","fail","canvas","FPS","items","deferred","paper","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","i","index","PointText","debugText","justification","content","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","pressEnter","point","bottomRight","multiply","fontSize","triggerStartScreen","key","remove","tool","onKeyDown","start","onMouseDown","onFrame","getPlayerState","toFixed","project","activeLayer","children","setting","runTime","Xpos","x","Group","addChild","Line","from","to","fontFamily"],"mappings":"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"}