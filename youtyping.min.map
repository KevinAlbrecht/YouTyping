{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","assert","condition","message","Error","YouTyping","element","settings","youTyping","this","screen","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","itemType","LINE","LONGLINE","NOTE","LYRIC","STOP","zeroEstimateSamples","videoId","dataFile","tableFile","width","height","judges","from","to","weight","Infinity","breakCombo","failureSuspension","initial","correction","controlledCorrection","offset","videoStop","volume","playbackQuality","param","hasOwnProperty","undefined","parseFloat","Boolean","dataXML","roll","player","Object","defineProperty","get","window","performance","now","table","setupPlayerDeferred","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","setAttribute","YT","Player","playerVars","rel","start","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","setPlaybackQuality","playVideo","pauseVideo","resolve","event","call","data","PlayerState","ENDED","PLAYING","isPlayingGame","estimateSamples","PAUSED","BUFFERING","CUED","reject","loadDataXML","ajax","url","type","datatype","timeout","success","find","first","initializeRoll","error","jqXHR","textStatus","errorThrown","items","lastNote","virtualCombo","each","tempItem","attr","mapsTo","line","longline","note","lyric","stop","has","remainingText","children","state","judgement","totalCombo","push","nextLyricIndex","findNextLyric","loadTable","index","before","after","next","calculateWeight","sumOfWeight","forEach","item","romanized","romanizeString","romaji","totalWeight","string","minimumStrokePerCharacter","maximumCharacter","minimumRule","rule","strokePerCharacter","startsWith","remainingString","slice","remainingRomaji","findNextNote","noteIndex","nextNote","i","itemIndex","nextLyric","gameLoop","gotCurrentTime","getCurrentTime","gotPlayerState","getPlayerState","currentTime","estimatedZero","shift","estimatedSum","reduce","previous","current","zeroTimePad","stopVideo","zeroCallFPS","zeroTime","previousLiveNote","previousLiveNoteIndex","markFailed","currentNoteIndex","inputBuffer","currentLyricIndex","scorebook","neglect","failed","endGame","combo","highScore","score","highScoreReplay","replay","localStorage","JSON","stringify","onGameEnd","getLastKeyHit","updateScore","scoredWeight","judge","Math","floor","scoredCombo","play","seekTo","gameLoopId","setInterval","setTimeout","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","nextNoteIndex","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","appliedRule","substr","hitNote","cleared","lastKeyHit","worstJudge","nearestNote","nearestNewNote","nearestDistance","distance","abs","hitJudge","some","previousNote","maxCombo","onJudgement","reset","clearInterval","initialize","getKanaLyric","lyricIndex","kanaLyric","storagedData","parse","callbacks","callback","when","done","onResourceReady","onGameReady","fail","prefix","substring","String","prototype","valueOf","module"],"mappings":"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"}