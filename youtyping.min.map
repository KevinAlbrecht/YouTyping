{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","YouTyping","element","settings","youTyping","this","screen","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","zeroEstimateSamples","videoId","dataFile","tableFile","width","height","judges","from","to","Infinity","breakCombo","failureSuspension","initial","correction","controlledCorrection","offset","volume","playbackQuality","startTime","now","dataXML","roll","player","zeroTime","zeroTimePad","currentTime","estimateSamples","estimatedZero","zeroCallFPS","Object","defineProperty","get","window","performance","table","currentNoteIndex","inputBuffer","currentLyricIndex","nextLyricIndex","combo","maxCombo","score","scorebook","setupPlayerDeferred","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","setAttribute","YT","Player","playerVars","rel","start","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","setPlaybackQuality","resolve","event","call","data","PlayerState","ENDED","PLAYING","PAUSED","BUFFERING","CUED","reject","loadDataXML","ajax","url","type","datatype","timeout","success","find","first","items","lastNote","each","tempItem","parseFloat","attr","has","remainingText","children","state","judgement","push","findNextLyric","error","jqXHR","textStatus","errorThrown","loadTable","index","before","after","next","findNextNote","noteIndex","nextNote","i","item","itemIndex","nextLyric","gameLoop","gotCurrentTime","getCurrentTime","shift","estimatedSum","reduce","previous","current","previousLiveNote","previousLiveNoteIndex","forEach","note","markFailed","neglect","failed","endGame","onGameEnd","play","playVideo","setInterval","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","rule","startsWith","nextNoteIndex","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","minimumRule","appliedRule","substr","hitNote","nearestNote","nearestNewNote","nearestDistance","Math","abs","distance","hitJudge","some","judge","previousNote","onJudgement","getKanaLyric","lyricIndex","kanaLyric","param","hasOwnProperty","undefined","Boolean","callbacks","callback","when","done","onResourceReady","onGameReady","fail","Screen","FPS","hitPosition","speed","noteSize","lyricSize","rollYpos","longLineHeight","lineHeight","screenPadding","bufferTextPosition","currentLyricPosition","nextLyricPosition","kanaLyricPosition","judgeColors","perfect","great","good","bad","youTypingSettings","initialize","paper","setup","canvas","cover","Path","Rectangle","view","bounds","fillColor","alpha","debugTexts","PointText","debugText","justification","bufferText","point","bottomRight","multiply","content","fontSize","currentLyric","judgeEffects","Group","paddingRight","paddingLeft","emergeTime","vanishTime","update","hitCircle","Circle","center","radius","strokeWidth","strokeColor","pressEnter","triggerStartScreen","remove","tool","onKeyDown","onMouseDown","onFrame","triggerHitNote","getPlayerState","preventDefault","runTime","position","longLine","addChild","Line","smallLine","lyric","fontFamily","orderStop","segments","lineBy","closed","x","visible","style","opacity","toFixed","project","activeLayer","judgeEffect","controller","css","cursor","JudgeEffect","judgeColor","add","translate","resultCover","showResult","screenSize","result","color","Color","brightness","saturation","wrap","margin","id","appendTo","display","z-index","data-paper-keepalive","top","left","string","prefix","substring","module"],"mappings":"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"}