{"version":3,"file":"youtyping.min.js","sources":["youtyping.js"],"names":["exports","logTrace","text","time","Date","hh","pad","getHours","mm","getMinutes","ss","getSeconds","lll","getMilliseconds","$","append","console","log","getParameterByName","name","replace","regex","RegExp","results","exec","location","search","decodeURIComponent","str","max","toString","length","assert","condition","message","Error","YouTyping","element","settings","youTyping","this","screen","noteState","WAITING","HITTING","CLEARED","HITTINGFAILED","FAILED","itemType","LINE","LONGLINE","NOTE","LYRIC","STOP","zeroEstimateSamples","videoId","dataFile","tableFile","width","height","judges","from","to","weight","Infinity","breakCombo","failureSuspension","initial","correction","controlledCorrection","offset","videoStop","volume","playbackQuality","param","hasOwnProperty","undefined","parseFloat","Boolean","dataXML","roll","player","Object","defineProperty","get","window","performance","now","table","setupPlayerDeferred","gameEndFlag","setupPlayer","Deferred","APITag","document","createElement","src","firstScript","getElementsByTagName","parentNode","insertBefore","promise","onYouTubeIframeAPIReady","DOM","setAttribute","YT","Player","playerVars","rel","start","controls","showinfo","modestbranding","wmode","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","onError","onPlayerError","loadXMLDeferred","loadTableDeferred","setVolume","setPlaybackQuality","playVideo","pauseVideo","resolve","event","dispatchEvent","data","PlayerState","ENDED","PLAYING","isPlayingGame","estimateSamples","PAUSED","BUFFERING","CUED","reject","loadDataXML","ajax","url","type","datatype","timeout","success","find","first","initializeRoll","error","jqXHR","textStatus","errorThrown","items","lastNote","virtualCombo","each","tempItem","attr","mapsTo","line","longline","note","lyric","stop","romaji","remainingRomaji","receivedRomaji","has","remainingText","children","state","judgement","totalCombo","push","nextLyricIndex","findNextLyric","loadTable","index","before","after","next","priority","strokePerCharacter","romanizationTable","extend","sort","a","b","calculateWeight","firstNote","totalWeight","forEach","item","result","romanizeNotes","remainingString","prefix","leftString","found","some","rule","startsWith","remainingPrefix","followingString","slice","nextNoteIndex","findNextNote","nextNote","noteIndex","i","itemIndex","nextLyric","gameLoop","gotCurrentTime","getCurrentTime","gotPlayerState","getPlayerState","currentTime","estimatedZero","shift","estimatedSum","reduce","previous","current","zeroTimePad","stopVideo","zeroCallFPS","zeroTime","previousLiveNote","previousLiveNoteIndex","markFailed","currentNoteIndex","inputBuffer","currentLyricIndex","endGame","scorebook","neglect","failed","combo","getLastKeyHit","replay","updateScore","scoredWeight","judge","score","Math","floor","scoredCombo","play","seekTo","gameLoopId","setInterval","setTimeout","hit","key","forceHit","preHitNote","hitKey","newInputBuffer","matchingRules","filter","nextNoteInfo","newNoteInfo","forcedHit","minimumLength","minimumRule","appliedRule","substr","hitNote","cleared","lastKeyHit","worstJudge","nearestNote","nearestNewNote","nearestDistance","distance","abs","hitJudge","previousNote","maxCombo","reset","clearInterval","initialize","getKanaLyric","lyricIndex","kanaLyric","addEventListener","listener","removeEventListener","splice","properties","call","when","done","bind","fail","string","substring","String","prototype","valueOf","module"],"mappings":"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"}